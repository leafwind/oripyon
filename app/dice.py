import random
import json
import logging

tarot_cards = json.load(open('app/tarot.json'))


def tarot():
    card = random.choice(tarot_cards)
    logging.info('%s: %s', card['nameCN'], card['url'])
    return card


def nca():
    n = random.randint(1, 10)  # 1 <= N <= 10
    desc_str_map = {
        1: 'å¤§å¤±æ•—\nå‘½ä¸­åŒ…å«è‡ªå·±çš„å‹æ–¹ï¼Œç”±è¢«æ”»æ“Šæ–¹é¸æ“‡è¢«å‘½ä¸­çš„éƒ¨ä½ã€‚',
        2: 'å¤±æ•—\næœªå‘½ä¸­',
        3: 'å¤±æ•—\næœªå‘½ä¸­',
        4: 'å¤±æ•—\næœªå‘½ä¸­',
        5: 'å¤±æ•—\næœªå‘½ä¸­',
        6: 'æˆåŠŸ\nç”±è¢«æ”»æ“Šæ–¹é¸æ“‡è¢«å‘½ä¸­çš„éƒ¨ä½ã€‚',
        7: 'æˆåŠŸ\nå‘½ä¸­è…³éƒ¨ã€‚\nå¦‚æžœè©²éƒ¨ä½å…¨éƒ¨ä»¶æå£žï¼Œç”±æ”»æ“Šè€…é¸æ“‡å…¶ä»–ä»»æ„éƒ¨ä½ã€‚',
        8: 'æˆåŠŸ\nå‘½ä¸­èƒ´éƒ¨ã€‚\nå¦‚æžœè©²éƒ¨ä½å…¨éƒ¨ä»¶æå£žï¼Œç”±æ”»æ“Šè€…é¸æ“‡å…¶ä»–ä»»æ„éƒ¨ä½ã€‚',
        9: 'æˆåŠŸ\nå‘½ä¸­è…•éƒ¨ã€‚\nå¦‚æžœè©²éƒ¨ä½å…¨éƒ¨ä»¶æå£žï¼Œç”±æ”»æ“Šè€…é¸æ“‡å…¶ä»–ä»»æ„éƒ¨ä½ã€‚',
        10: 'æˆåŠŸ\nå‘½ä¸­é ­éƒ¨ã€‚\nå¦‚æžœè©²éƒ¨ä½å…¨éƒ¨ä»¶æå£žï¼Œç”±æ”»æ“Šè€…é¸æ“‡å…¶ä»–ä»»æ„éƒ¨ä½ã€‚',
    }
    return f'æ­»éˆå¹´ä»£è¨˜ä¹‹æ°¸é çš„å¾Œæ—¥è«‡ï¼š[{n}]  â†’ {desc_str_map[n]}'


def choice(matched_msg):
    options_str = matched_msg.split('[')[1][:-1]
    options = options_str.split(',')
    result = f'è‡ªè¨‚é¸é …ï¼š[{",".join(options)}] â†’ {random.choice(options)}'
    return result


def fortune():
    dice = random.randint(1, 1000)  # 1 <= N <= 1000
    ans = [
        'å¤§å‰ã ã‚ˆï¼\nã‚„ã£ãŸã­â­ï¸Ž',
        'å¤§å‰â€¦â€¦é¨™ä½ çš„ï¼Œå·®ä¸€é»žå‘¢ï¼\nåªæ˜¯å‰è€Œå·²å‘¦(`ãƒ»Ï‰ãƒ»Â´)',
        'å‰ã€‚ðŸŽ‰\nå¾ˆæ£’å‘¢ï¼',
        'ä¸­å‰ã€‚\né‚„ä¸éŒ¯å§ã€‚(ã‚âˆ€ï½¥)',
        'å°å‰ã€‚\nå°±æ˜¯å°å‰ï¼Œå¹³æ·¡éŽæ—¥å­ï¼Œé¡˜ä¸–ç•Œå’Œå¹³ã€‚â˜®',
        'åŠå‰ã€‚\nãŠ—ï¸pyoné†¬ç¥ç¦ä½ ï¼(^y^)',
        'æœ«å‰ã€‚\nå—¯ï½žå‹‰å‹‰å¼·å¼·å§ï¼(,,ãƒ»Ï‰ãƒ»,,)ã€‚',
        'æœ«å°å‰ã€‚\nè‡³å°‘ä¸å£žå‘¢ï¼(*Â´âˆ€`)',
        'å‡¶ã€‚\nÏƒ ï¾Ÿâˆ€ ï¾Ÿ) ï¾Ÿâˆ€ï¾Ÿ)Ïƒè‡³å°‘é‚„æœ‰å¾ˆå¤šæ›´ç³Ÿçš„ï¼',
        'å°å‡¶ã€‚\n(Ìâ—‰â—žà±ªâ—Ÿâ—‰â€µ)é‹æ°£ä¸æ˜¯å¾ˆå¥½å‘¢ï¼Œæ€Žéº¼è¾¦ï¼Ÿ',
        'åŠå‡¶ã€‚\næœ‰é»žç³Ÿç³•ï½ž(â—”à±ªâ—”)',
        'æœ«å‡¶ã€‚\nã™ã°ã‚‰ã—ãé‹ãŒãªã„ãªã€å›ã¯ã€‚ðŸ˜Š',
        'å¤§å‡¶â€¦â€¦â‰ï¸\næ¬¸é€™æ©ŸçŽ‡æ˜¯åƒåˆ†ä¹‹ä¸€å–”ï¼Ÿ\næ¯”å¤§å‰çš„ç™¾åˆ†ä¹‹äºŒé‚„æ…˜å–”ï¼ï¼Ÿ\næ²’å•é¡Œå—Žï¼Ÿ(((ï¾ŸÐ”ï¾Ÿ;)))'
    ]
    if dice <= 20:
        return ans[0]
    elif dice <= 90:
        return ans[1]
    elif dice <= 160:
        return ans[2]
    elif dice <= 250:
        return ans[3]
    elif dice <= 363:
        return ans[4]
    elif dice <= 444:
        return ans[5]
    elif dice <= 525:
        return ans[6]
    elif dice <= 600:
        return ans[7]
    elif dice <= 720:
        return ans[8]
    elif dice <= 825:
        return ans[9]
    elif dice <= 929:
        return ans[10]
    elif dice <= 999:
        return ans[11]
    elif dice <= 1000:
        return ans[12]
    else:
        raise ValueError
